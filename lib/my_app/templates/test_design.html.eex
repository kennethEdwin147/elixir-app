<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <script src="https://cdn.tailwindcss.com"></script>


<script type="module" src="/static/js/components/game-select.js"></script>
<script type="module" src="/static/js/components/tags-select.js"></script>
<script type="module" src="/static/js/components/modal-dialog.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=BBH+Hegarty&display=swap" rel="stylesheet">
</head>
<body class="">

<style>

  @keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fadeIn {
  animation: fadeIn 0.2s ease-out;
}

.animate-slideUp {
  animation: slideUp 0.3s ease-out;
}
</style>

<div class="min-h-screen ">



  <aside class="hidden text-black  h-full lg:flex fixed left-0 w-64  border-gray-200 z-10
                h-[calc(100vh-4rem)] overflow-y-auto bg-gray-50 border-r">

  <nav class="p-4 w-full">
  <button
  onclick="document.getElementById('createModal').open = true"
  class="w-full hidden mx-4 font-extrabold flex items-center gap-3 p-3 py-2 hover:bg-gray-200 rounded-lg text-gray-700 font-medium">
    <svg class="w-6 h-6" fill="none" stroke="black" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
    </svg>
    <p class="font-sm w-full text-gray-900">Create Post</p>
    </button>

    <ul class="flex flex-col gap-2 mt-2 text-body px-6">
     <li class="">
         <svg aria-label="Miro" xmlns="http://www.w3.org/2000/svg" width="66" height="32" fill="var(--colors-icon-neutrals)" data-icon-component="true"><path fill="currentColor" d="M37.244 14.705v9.301h3.81v-8.73c0-3.889 5.293-3.895 5.293-3.895V7.597s-1.48.066-2.649.329c-3.316.746-6.454 2.381-6.454 6.78ZM8.523 7.41c1.484 0 3.338.84 4.348 2.316 1.045-1.343 2.765-2.25 4.89-2.284 2.698-.034 6.034 1.645 6.034 6.683v9.87h-3.81v-9.87c0-1.68-1.215-2.887-3.033-2.887-1.818 0-3.034 1.207-3.034 2.887v9.87h-3.81v-9.87c0-1.68-1.213-2.887-3.033-2.887-1.82 0-3.068 1.207-3.068 2.887v9.87H0V7.91h4.007v1.616c1.08-1.309 2.663-2.116 4.518-2.116h-.002Zm24.034.705v15.893h-3.875V8.114h3.875Zm-1.938-2.529a2.158 2.158 0 0 0 2.163-2.152A2.158 2.158 0 0 0 30.62 1.28a2.158 2.158 0 0 0-2.163 2.153c0 1.188.968 2.152 2.163 2.152Zm26.075 1.79c-4.691 0-8.494 3.783-8.494 8.452 0 4.669 3.803 8.453 8.494 8.453 4.692 0 8.495-3.784 8.495-8.453s-3.803-8.453-8.495-8.453Zm0 13.104c-2.655 0-4.81-2.142-4.81-4.785 0-2.644 2.154-4.786 4.81-4.786 2.657 0 4.81 2.142 4.81 4.786 0 2.643-2.153 4.785-4.81 4.785Z"></path></svg>
         </li>



         <li class="">
            <a href="#" class="flex items-center px-2 py-1.5 text-body rounded-base hover:bg-neutral-tertiary hover:text-fg-brand group">
               <svg class="w-5 h-5 transition duration-75 group-hover:text-fg-brand" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6.025A7.5 7.5 0 1 0 17.975 14H10V6.025Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.5 3c-.169 0-.334.014-.5.025V11h7.975c.011-.166.025-.331.025-.5A7.5 7.5 0 0 0 13.5 3Z"/></svg>
               <span class="ms-3">Messages</span>
            </a>
         </li>


         <li class="">
            <a href="#" class="flex items-center px-2 py-1.5 text-body rounded-base hover:bg-neutral-tertiary hover:text-fg-brand group">
               <svg class="w-5 h-5 transition duration-75 group-hover:text-fg-brand" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6.025A7.5 7.5 0 1 0 17.975 14H10V6.025Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.5 3c-.169 0-.334.014-.5.025V11h7.975c.011-.166.025-.331.025-.5A7.5 7.5 0 0 0 13.5 3Z"/></svg>
               <span class="ms-3">Notifications</span>
            </a>
         </li>



         <li class=" text-body">
            <a href="#" class="flex items-center px-2 py-1.5 text-body rounded-base hover:bg-neutral-tertiary hover:text-fg-brand group">
               <svg class="shrink-0 w-5 h-5 transition duration-75 group-hover:text-fg-brand" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v14M9 5v14M4 5h16a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1Z"/></svg>
               <span class="ms-3">Dashboard</span>
            </a>
         </li>
          <li class=" text-body">
          <button
          onclick="document.getElementById('createModal').open = true"
          type="button" class="py-3 px-4 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200 focus:outline-hidden focus:bg-blue-200 disabled:opacity-50 disabled:pointer-events-none dark:text-blue-400 dark:hover:bg-blue-900 dark:focus:bg-blue-900">
            Nouveau message
          </button>
          </li>
         </ul>

  </nav>
  <!-- Collapse button at bottom -->




  </aside>

  <main class="flex-1 lg:ml-64 pt-1 rounded-t-lg bg-gray-50">

<section class="my-1 px-4">
  <!-- Form GET pour recherche -->
  <form method="GET" action="/" class="relative w-full max-w-2xl">
    <div class="absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none">
      <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
      </svg>
    </div>
    <input
      type="text"
      name="q"
      value="<%= @search_query %>"
      placeholder="Search or ask your Mem"
      class="w-full pl-12 pr-4 py-4 bg-white border-b-2  rounded-xl text-gray-700 placeholder-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300 hover:bg-gray-100 transition-colors"
    />

    <!-- Garder les filtres actifs (optionnel mais recommandé) -->
    <%= if @selected_game do %>
      <input type="hidden" name="game" value="<%= @selected_game %>" />
    <% end %>

    <%= for tag <- @selected_tags do %>
      <input type="hidden" name="tags[]" value="<%= tag %>" />
    <% end %>
  </form>
</section>



  <!-- Nouvelle section -->

  <div class="min-h-screen max-w-5xl px-4 py-2">

<header>

</header>


<section class="flex flex-col gap-4 mt-2 ml-4 ">
  <article class="w-full p-4 py-2  border-l-4 bg-gray-50 border-purple-500 max-w-5xl">
    <div class="flex items-center justify-between mb-6">
        <div class="flex items-center">
            <span class="hidden relative p-2 bg-blue-100 rounded-xl">
                <svg width="25" height="25" viewBox="0 0 256 262" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid">
                    <path d="M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027" fill="#4285F4">
                    </path>
                    <path d="M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1" fill="#34A853">
                    </path>
                    <path d="M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782" fill="#FBBC05">
                    </path>
                    <path d="M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251" fill="#EB4335">
                    </path>
                </svg>
            </span>
            <div class="flex flex-col">
                <span class="ml-2 font-bold text-black text-md">
                    Google
                </span>
                <span class="ml-2 text-sm text-gray-500">
                    Google Inc.
                </span>
            </div>
        </div>
        <div class="flex items-center">
            <button class="p-1 border border-gray-200 rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="w-4 h-4 text-yellow-500" fill="currentColor" viewBox="0 0 1792 1792">
                    <path d="M1728 647q0 22-26 48l-363 354 86 500q1 7 1 20 0 21-10.5 35.5t-30.5 14.5q-19 0-40-12l-449-236-449 236q-22 12-40 12-21 0-31.5-14.5t-10.5-35.5q0-6 2-20l86-500-364-354q-25-27-25-48 0-37 56-46l502-73 225-455q19-41 49-41t49 41l225 455 502 73q56 9 56 46z">
                    </path>
                </svg>
            </button>
            <button class="text-gray-200">
                <svg width="25" height="25" fill="currentColor" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1088 1248v192q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h192q40 0 68 28t28 68zm0-512v192q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h192q40 0 68 28t28 68zm0-512v192q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h192q40 0 68 28t28 68z">
                    </path>
                </svg>
            </button>
        </div>
    </div>
     <p class=" text-gray-800 mt-2">
      je veux 2 teams mates valorant pour competitionner ce soir 2 vs 2 now
    </p>
    <div class="hidden flex items-center justify-between mb-4 space-x-12">
        <span class="flex items-center px-2 py-1 text-xs font-semibold text-gray-500 bg-gray-200 rounded-md">
            PROGRESS
        </span>
        <span class="flex items-center px-2 py-1 text-xs font-semibold text-red-400 bg-white border border-purple-400 rounded-md">
            HIGH PRIORITY
        </span>
    </div>

    <div class="block m-auto hidden">
        <div>
            <span class="inline-block text-sm text-gray-500">
                Task done :
                <span class="font-bold text-gray-700">
                    25
                </span>
                /50
            </span>
        </div>
        <div class="w-full h-2 mt-2 bg-gray-200 rounded-full">
            <div class="w-1/2 h-full text-xs text-center text-white bg-purple-500 rounded-full">
            </div>
        </div>
    </div>
    <div class="flex items-center justify-start my-4 space-x-4 lowercase">
        <span class="flex items-center px-2 py-1 text-xs font-semibold text-green-500 rounded-md bg-green-50">
            IOS APP
        </span>
        <span class="flex items-center px-2 py-1 text-xs font-semibold text-blue-500 bg-blue-100 rounded-md">
           CHILL
        </span>
         <span class="flex items-center px-2 py-1 text-xs font-semibold text-red-500 bg-purple-200 rounded-md">
            COMPETITIVE
        </span>
    </div>


    <div class="relative">
          <input
            class="pt-2 pb-2 pl-3 w-full h-11 bg-slate-100 rounded-lg placeholder:text-slate-600  font-medium pr-20"
            type="text" placeholder="Write a comment" />
          <span class="flex absolute right-3 top-2/4 -mt-3 items-center">
            <svg class="mr-2" style="width: 26px; height: 26px;" viewBox="0 0 24 24">
              <path fill="currentColor"
                d="M20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M10,9.5C10,10.3 9.3,11 8.5,11C7.7,11 7,10.3 7,9.5C7,8.7 7.7,8 8.5,8C9.3,8 10,8.7 10,9.5M17,9.5C17,10.3 16.3,11 15.5,11C14.7,11 14,10.3 14,9.5C14,8.7 14.7,8 15.5,8C16.3,8 17,8.7 17,9.5M12,17.23C10.25,17.23 8.71,16.5 7.81,15.42L9.23,14C9.68,14.72 10.75,15.23 12,15.23C13.25,15.23 14.32,14.72 14.77,14L16.19,15.42C15.29,16.5 13.75,17.23 12,17.23Z">
              </path>
            </svg>
            <svg class="fill-blue-500 " style="width: 24px; height: 24px;" viewBox="0 0 24 24">
              <path d="M2,21L23,12L2,3V10L17,12L2,14V21Z"></path>
            </svg>
          </span>
        </div>
</article>
</section>


   <!-- Header with title and filter icon -->
  <div class="hidden flex justify-between items-center px-4 my-4 mb-4">
    <h1 class="text-sm font-bold text-gray-900">Apex Legends</h1>
    <button class="p-2 hover:bg-gray-200 rounded-lg">
      <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"></path>
      </svg>
    </button>
  </div>


  <!-- Today section -->
  <div class="mb-4 p-6 pt-2 min-h-screen ">

    <!-- Notes list -->
    <div class="space-y-1 hidden">





          <%= for announcement <- @announcements do %>

      <div class="flex items-center justify-between p-4 py-2 hover:text-red-500 hover:bg-gray-100 cursor-pointer group">
        <div class="flex items-center gap-3">
          <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg>
          <div>
            <header class="flex items-center gap-2">
                <h3 class="font-extrabold text-gray-900">/<%= announcement.game %></h3>
                <span class="text-sm  text-gray-500"><%= announcement.time_ago %> ago</span>
            <span class="text-sm  text-gray-500">by @<%= announcement.user.username %></span>
            </header>
            <p class="text-base max-w-sm mt-2 text-gray-800"><%= announcement.description %></p>

    <!-- Tags dynamiques -->
    <footer class="mt-2 lg:mt-0 flex items-center gap-2 flex-wrap max-w-sm">
      <%= for tag <- announcement.tags do %>
        <span class="text-base p-1 rounded-full font-bold   text-purple-700">[<%= tag %>]</span>
      <% end %>
    </footer>

          </div>

        </div>
          <footer class="mt-2 lg:mt-2 flex items-center gap-2 flex-wrap max-w-sm">
        <span class="font-medium text-gray-700 rounded-full">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-circle-more-icon lucide-message-circle-more"><path d="M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719"/><path d="M8 12h.01"/><path d="M12 12h.01"/><path d="M16 12h.01"/></svg>
        </span>
        <span class="font-medium text-gray-700 rounded-full">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart-plus-icon lucide-heart-plus"><path d="m14.479 19.374-.971.939a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5a5.2 5.2 0 0 1-.219 1.49"/><path d="M15 15h6"/><path d="M18 12v6"/></svg>
        </span>
        <span class="font-medium text-gray-700  rounded-full">interesse</span>

      </footer>


      </div>

    <hr>
    <% end %>


    </div>
  </div>



</div>



  <!-- Fin nouvelle section -->



      <section class="bg-white min-h-[calc(100vh-4rem)] px-4 py-2 space-y-1">

<!-- Start: main-article -->

    <!-- Card 1 -->




<! -- Dynamic content -->

 <!-- LISTE DES ANNONCES -->

    <%= for announcement <- @announcements do %>
    <hr class="">
  <!-- Start: main-article -->
  <article class=" p-2 rounded-lg hover:bg-gray-50  transition-colors duration-300">
    <div class="flex items-start justify-between">

      <header class="flex-1 pr-4 space-y-2">

        <div class="flex items-center text-sm mb-1 gap-x-2">
          <img class="hidden object-cover w-8 h-8 rounded-lg" src="https://i.pinimg.com/736x/b7/00/99/b70099c2f7ca070396e75bc4f3ba59d9.jpg" alt="">

          <p class="font-bold text-gray-700">
            <%= announcement.game %>
          </p>
          <span class="text-gray-500">by @<%= announcement.user.username %> · <%= announcement.time_ago %></span>
        </div>

        <h2 class="text-sm leading-snug hover:text-red-600 cursor-pointer">
          <%= announcement.description %>
        </h2>
      </header>

      <div class="flex gap-2">
        <!-- Card 2 -->
        <div class="bg-white rounded-2xl flex flex-col items-center justify-center h-16 w-16 shadow-sm">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-big-up-dash-icon lucide-arrow-big-up-dash"><path d="M9 13a1 1 0 0 0-1-1H5.061a1 1 0 0 1-.75-1.811l6.836-6.835a1.207 1.207 0 0 1 1.707 0l6.835 6.835a1 1 0 0 1-.75 1.811H16a1 1 0 0 0-1 1v2a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1z"/><path d="M9 20h6"/></svg>
          <p class="text-sm font-semibold text-gray-900">180</p>
        </div>

        <!-- Card 1 -->
        <div class="bg-white rounded-2xl hidden lg:flex flex-col items-center justify-center h-16 w-16 shadow-sm">
          <svg class="w-4 h-4 mb-2 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
          </svg>
          <p class="text-sm font-semibold text-gray-900">24</p>
        </div>
      </div>

    </div>

    <!-- Tags dynamiques -->
    <footer class="mt-2 lg:mt-0 flex items-center gap-2 flex-wrap max-w-sm">
      <%= for tag <- announcement.tags do %>
        <span class="text-base p-1 rounded-full font-bold   text-purple-700">[<%= tag %>]</span>
      <% end %>
    </footer>

    <footer class="mt-2 lg:mt-0 flex items-center gap-2 flex-wrap max-w-sm">
      <span class="text-xs p-2 rounded-full">Commentaires</span>
      <span class="text-xs p-2 rounded-full">contact</span>
      <span class="text-xs p-2 rounded-full">interesse</span>
    </footer>

  </article>
<% end %>


<!-- End: Dynamic content -->

<hr class="hidden">
      </section>

<!-- Modal avec le formulaire -->
<modal-dialog
  id="createModal"
  title="Créer une annonce"
  >
  <div slot="content" class="h-full">
    <form action="/announcements/new" method="POST" class="space-y-4 h-full">
      <game-select id="gameSelect"></game-select>
      <input type="hidden" name="game" id="gameInput">

      <div class="space-y-4 mt-4">
      <tags-select id="tags"></tags-select>
      <input type="hidden" name="tags" id="tagsInput">
      </div>

      <textarea
        name="description"
        rows="5"
        placeholder="Je cherche 2 teammates..."
        required
        class="w-full flex-1 px-5 py-2 rounded-2xl bg-gray-100 focus:outline-none"
      ></textarea>

      <button type="submit" class="w-full px-6 py-2 bg-black text-white rounded-full">
        Publier
      </button>
    </form>
  </div>
</modal-dialog>


  </main>









</div>


<script type="module">
  await customElements.whenDefined('game-select');
  await customElements.whenDefined('tags-select');

  document.querySelector('game-select').addEventListener('change', (e) => {
    document.getElementById('gameInput').value = e.detail.value;
    console.log('✅ Game:', e.detail.value);
  });

  document.querySelector('tags-select').addEventListener('change', (e) => {
    document.getElementById('tagsInput').value = JSON.stringify(e.detail.values);
    console.log('✅ Tags:', e.detail.values);
  });
</script>

</body>
</html>
