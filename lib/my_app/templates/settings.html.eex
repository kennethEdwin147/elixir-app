<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paramètres - Link in Bio</title>
</head>
<body>
    <nav>
        <a href="/dashboard">Dashboard</a> |
        <a href="/user/settings">Paramètres</a> |
        <form method="post" action="/login/logout" style="display: inline;">
            <button type="submit">Déconnexion</button>
        </form>
    </nav>

    <hr>

    <h1>Paramètres</h1>

    <p>Email: <strong><%= @user_email %></strong></p>

    <%= if @error_msg do %>
        <p style="color: red;"><%= @error_msg %></p>
    <% end %>

    <%= if @success_msg do %>
        <p style="color: green;"><%= @success_msg %></p>
    <% end %>

    <hr>

    <section>
        <h2>Profil</h2>
        <form method="post" action="/user/settings/profile">
            <div>
                <label>Nom d'utilisateur (pour votre URL publique):</label><br>
                <input type="text" name="username" value="<%= @username %>" placeholder="kenneth-gamer" pattern="[a-zA-Z0-9-]+" required>
                <small>Lettres, chiffres et tirets uniquement</small>
            </div>
            <br>
            <div>
                <label>Bio:</label><br>
                <textarea name="bio" rows="4" cols="50" placeholder="Streamer gaming & tech"><%= @bio %></textarea>
            </div>
            <br>
            <div>
                <label>URL de l'image de profil:</label><br>
                <input type="url" name="profile_image" value="<%= @profile_image %>" placeholder="https://...">
            </div>
            <br>
            <button type="submit">Enregistrer le profil</button>
        </form>
    </section>

    <hr>

    <section>
        <h2>Apparence</h2>
        <form method="post" action="/user/settings/appearance">
            <div>
                <label>Thème:</label><br>
                <select name="theme">
                    <option value="default" <%= if @theme == "default", do: "selected" %>>Par défaut</option>
                    <option value="dark" <%= if @theme == "dark", do: "selected" %>>Sombre</option>
                    <option value="minimal" <%= if @theme == "minimal", do: "selected" %>>Minimal</option>
                </select>
            </div>
            <br>
            <div>
                <label>Couleur principale:</label><br>
                <input type="color" name="primary_color" value="<%= @primary_color %>">
            </div>
            <br>
            <div>
                <label>Couleur de fond:</label><br>
                <input type="color" name="background_color" value="<%= @background_color %>">
            </div>
            <br>
            <div>
                <label>Style des boutons:</label><br>
                <select name="button_style">
                    <option value="rounded" <%= if @button_style == "rounded", do: "selected" %>>Arrondis</option>
                    <option value="square" <%= if @button_style == "square", do: "selected" %>>Carrés</option>
                    <option value="pill" <%= if @button_style == "pill", do: "selected" %>>Pill</option>
                </select>
            </div>
            <br>
            <button type="submit">Enregistrer l'apparence</button>
        </form>
    </section>

    <hr>

    <section>
        <h2>Changer le mot de passe</h2>
        <form method="post" action="/user/settings/password">
            <div>
                <label>Mot de passe actuel:</label><br>
                <input type="password" name="current_password" required>
            </div>
            <br>
            <div>
                <label>Nouveau mot de passe:</label><br>
                <input type="password" name="new_password" minlength="6" required>
            </div>
            <br>
            <div>
                <label>Confirmer le nouveau mot de passe:</label><br>
                <input type="password" name="new_password_confirm" minlength="6" required>
            </div>
            <br>
            <button type="submit">Changer le mot de passe</button>
        </form>
    </section>

    <hr>

    <footer>
        <p><a href="/dashboard">← Retour au dashboard</a></p>
    </footer>
</body>
</html>
